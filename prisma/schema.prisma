generator client {
  provider = "prisma-client-js"
}

// // DEV_DATABASE_URL="postgres://postgres:tesla@127.0.0.1:5432/redapple"
// let connstring = ""


datasource db {
  provider = "mysql"
  url      = "mysql://root:tesla@127.0.0.1:3306/reddotdb"
}

model role {
  id          BigInt      @id @default(autoincrement())
  name        String?     @db.VarChar(255)
  description String?     @db.VarChar(50)
  user_role   user_role[]
}


model user_role {
  
  role_id BigInt
  user_id BigInt
  role    role   @relation(fields: [role_id], references: [id])
  users   users  @relation(fields: [user_id], references: [id])

  @@id([role_id, user_id])
}

model users {
  id              BigInt      @id @default(autoincrement())
  center_id        BigInt       
  username        String?     @db.VarChar(45)
  userpass        String?     @db.VarChar(255)
  mobilenumber    String?     @db.VarChar(20)
  email           String?     @db.VarChar(150)
  firstname       String?     @db.VarChar(45)
  lastName        String?     @db.VarChar(45)
  profileimgurl   String?     @db.VarChar(150)
  gender          String?     @db.VarChar(10)
  dob             String?     @db.VarChar(50)
  status          String?     @db.VarChar(20)
  address         String?     @db.VarChar(350)
  createdby       BigInt?     
  createddatetime DateTime?   @db.Timestamp(6)
  updatedby       BigInt?     
  updateddatetime DateTime?   @db.Timestamp(6)
  user_role       user_role[]
  center          center      @relation(fields: [center_id], references: [id])
  @@unique([username], name: "username_UNIQUE")
}


model state {
  id            BigInt      @id @default(autoincrement())
  code          String?     @db.VarChar(20)
  description   String?     @db.VarChar(50)
  center        center[]
  vendor        vendor[]
  customer_shipping_address customer_shipping_address[]
  
}


model timezones {
  id            BigInt      @id @default(autoincrement())
  timezone      String?     @db.VarChar(100)
  description   String?     @db.VarChar(100)
  offset        String?     @db.VarChar(100)
}


model center_banks {
  id            BigInt      @id @default(autoincrement())
  center_id     BigInt?
  bankname      String?     @db.VarChar(100)
  accountname   String?     @db.VarChar(150)
  accountno     String?     @db.VarChar(50)
  ifsccode      String?     @db.VarChar(50)
  branch        String?     @db.VarChar(50)
  createddate   DateTime?   @db.Timestamp(6)
  createdby     BigInt?
  updateddate   DateTime?   @db.Timestamp(6)
  updatedby     BigInt?
  isdefault     String?     @db.VarChar(1)
}



model center {
  id              BigInt      @id @default(autoincrement())
  company_id      BigInt
  name            String?     @db.VarChar(150)
  address1        String?     @db.VarChar(50)
  address2        String?     @db.VarChar(50)
  address3        String?     @db.VarChar(50)
  state_id        BigInt
  pin             String?     @db.VarChar(50)
  district        String?     @db.VarChar(50)
  country         String?     @db.VarChar(50)
  location        String?     @db.VarChar(50)
  gst             String?     @db.VarChar(50)
  bankname        String?     @db.VarChar(100)
  accountname     String?     @db.VarChar(150)
  accountno       String?     @db.VarChar(50)
  ifsccode        String?     @db.VarChar(50)
  branch          String?     @db.VarChar(50)
  phone           String?     @db.VarChar(50)
  mobile          String?     @db.VarChar(50)
  mobile2         String?     @db.VarChar(50)
  whatsapp        String?     @db.VarChar(50)
  email           String?     @db.VarChar(50)
  tagline         String?     @db.VarChar(100)
  logo_name       String?     @db.VarChar(100)
  logo_url        String?     @db.VarChar(200)
  side_logo_name  String?     @db.VarChar(100)
  side_logo_url   String?     @db.VarChar(200)
  users           users[]
  subscriptions   subscriptions[]
  state           state      @relation(fields: [state_id], references: [id])
  company         company    @relation(fields: [company_id], references: [id])
}

model company {
  id              BigInt      @id @default(autoincrement())
  name            String?     @db.VarChar(150)
  address1        String?     @db.VarChar(50)
  address2        String?     @db.VarChar(50)
  address3        String?     @db.VarChar(50)
  district        String?     @db.VarChar(50)
  state_id        BigInt?
  country         String?     @db.VarChar(50)
  location        String?     @db.VarChar(50)
  gst             String?     @db.VarChar(50)
  bankname        String?     @db.VarChar(100)
  accountno       String?     @db.VarChar(50)
  ifsccode        String?     @db.VarChar(50)
  branch          String?     @db.VarChar(50)
  addressbnk      String?     @db.VarChar(50)
  addbankname     String?     @db.VarChar(50)
  addaccountno    String?     @db.VarChar(50)
  addifsccode     String?     @db.VarChar(50)
  addaddressank   String?     @db.VarChar(50)
  center          center[]
}

model subscriptions {
  id                                BigInt      @id @default(autoincrement())
  center_id                         BigInt
  plan_id                           BigInt
  subscription_start_timestamp      DateTime?   @db.Timestamp(6)
  subscription_end_timestamp        DateTime?   @db.Timestamp(6)
  subscription_purchased_timestamp  DateTime?   @db.Timestamp(6)
  is_active                         String?     @db.VarChar(20)
  center                            center        @relation(fields: [center_id], references: [id])
  plans                            plans        @relation(fields: [plan_id], references: [id])
}

model plans {
id                                BigInt      @id @default(autoincrement())
name                              String?     @db.VarChar(200)
price_per_month                   Decimal?    @db.Decimal(12,2)
is_active                         String?     @db.VarChar(20)
subscriptions                     subscriptions[]
}



model product {
  id                      BigInt      @id @default(autoincrement())
  center_id	              BigInt?
  brand_id	              BigInt     
  product_type            String?      @db.VarChar(20) @default("P")
  product_code	          String?	    @db.VarChar(50)
  product_description	    String?	    @db.VarChar(250)
  uom 	                  String?	    @db.VarChar(50)
  packet_size	            Int?	   
  hsn_code	              String?	    @db.VarChar(50)
  current_stock	          Int?        @default(0)
  unit_price	             Decimal?     @default(0.00)
  mrp	                     Decimal?     @default(0.00)
  purchase_price	         Decimal?     @default(0.00)
  sales_price	             Decimal?     @default(0.00)
  rack_info	                String?	    @db.VarChar(50) @default("")
  location	              String?	    @db.VarChar(50) @default("")
  max_discount	          Int?	    @default(0)
  alternate_code	        String?	    @db.VarChar(50) @default("")
  tax_rate	              Decimal?	  @db.Decimal(10,2)
  minimum_quantity	      Int?        @default(0)
  item_discount	          Int?	      @default(0)
  reorder_quantity	      Int?        @default(0)
  average_purchase_price	Decimal?	  @db.Decimal(10,2) @default(0.00)
  average_sale_price	    Decimal?	  @db.Decimal(10,2) @default(0.00)
  margin	                Decimal?	  @db.Decimal(10,2) @default(0.00)
  createdAt	              DateTime?   @default(now())
  updatedAt	              DateTime?   @updatedAt
  created_by	            BigInt?
  updated_by              BigInt?
  brand                   brand      @relation(fields: [brand_id], references: [id])
  stock                   stock[]
}


model brand {
  id              BigInt      @id @default(autoincrement())
  center_id	      BigInt?
  name            String?	    @db.VarChar(150)
  is_active        String?	    @db.VarChar(1)
  createdAt	              DateTime?   @default(now())
  updatedAt	              DateTime?   @updatedAt
  created_by	            BigInt?
  updated_by              BigInt?
  product         product[]   
}



model customer {
  id                BigInt      @id @default(autoincrement())
  center_id	        BigInt?
  state_id	        BigInt?
  name	            String?	    @db.VarChar(150)
  address1	        String?	    @db.VarChar(50)
  address2	        String?	    @db.VarChar(50)
  address3	        String?	    @db.VarChar(50)
  district	        String?	    @db.VarChar(50)
  pin	              String?	    @db.VarChar(50) 
  gst	              String?	    @db.VarChar(50)
  phone	            String?	    @db.VarChar(50)
  whatsapp	        String?	    @db.VarChar(50)
  mobile	          String?	    @db.VarChar(50)
  mobile2	          String?	    @db.VarChar(50)
  email	            String?	    @db.VarChar(50)
  createdon	        String?     @db.VarChar(50)
  isactive	        String?	    @db.VarChar(1)
  contact	          String?	    @db.VarChar(50)
  tin	              String?	    @db.VarChar(50)
  panno	            String?	    @db.VarChar(50)
  credit_amt	      Decimal?	  @db.Decimal(10,2)
  balance_amt	      Decimal?	  @db.Decimal(10,2)
  last_paid_date    Decimal?	  @db.Decimal(10,2)
  sale              sale[]
  discount        discount[]
}


model sale {
  id                      BigInt      @id @default(autoincrement())
  center_id	              BigInt?
  customer_id	            BigInt
  invoice_no	            String?	    @db.VarChar(50)
  invoice_date	          String?	    @db.VarChar(50)
  lr_no	                  String?	    @db.VarChar(50)
  lr_date	                String?	    @db.VarChar(50)
  received_date	          String?	    @db.VarChar(50)
  sales_type	            String?	    @db.VarChar(50)
  order_no	              String?	    @db.VarChar(50)
  order_date	            String?	    @db.VarChar(50)
  total_qty               BigInt?
  no_of_items	            Int?
  taxable_value           Decimal?	  @db.Decimal(10,2)
  cgst                    Decimal?	  @db.Decimal(10,2)
  sgst                    Decimal?	  @db.Decimal(10,2)
  igst                    Decimal?	  @db.Decimal(10,2)
  total_value	            Decimal?	  @db.Decimal(15,2)
  transport_charges	      Int?	
  unloading_charges       Int?
  misc_charges            Int?
  net_total               Decimal?	  @db.Decimal(15,2)
  no_of_boxes             Int?
  status                  String?	    @db.VarChar(1)
  sale_datetime           String?	    @db.VarChar(50)
  revision                BigInt?
  tax_applicable          String?	    @db.VarChar(50)
  stock_issue_ref         String?	    @db.VarChar(150)
  stock_issue_date_ref    String?	    @db.VarChar(50)
  roundoff                Decimal?	  @db.Decimal(10,2)
  retail_customer_name    String?	    @db.VarChar(150)
  retail_customer_address String?	    @db.VarChar(150)
  retail_customer_phone   String?	    @db.VarChar(50)
  print_count             Int?
  inv_gen_mode            String?	    @db.VarChar(1)
  customer                customer    @relation(fields: [customer_id], references: [id])
}


model discount {
  id                      BigInt      @id @default(autoincrement())
  center_id	              BigInt?
  customer_id	            BigInt
  type                    String?	    @db.VarChar(50)
  value                   Decimal?	  @db.Decimal(5,2)
  gst_slab                Int?	   
  startdate               String?	    @db.VarChar(50)
  enddate                 String?	    @db.VarChar(50)
  brand_id                BigInt?
  customer                customer    @relation(fields: [customer_id], references: [id])
}	

model permissions {
  id                      BigInt      @id @default(autoincrement())
  center_id	              BigInt?
  role_id                 BigInt
  operation               String?	    @db.VarChar(50)
  resource                String?	    @db.VarChar(120)
  is_access               String?	    @db.VarChar(1)
}

model vendor {
  id                      BigInt      @id @default(autoincrement())
  center_id                BigInt?
  name                    String?	    @db.VarChar(150)
  address1                String?	    @db.VarChar(150)
  address2                String?	    @db.VarChar(150)
  address3                String?	    @db.VarChar(150)
  district                String?	    @db.VarChar(50)
  state_id                BigInt?
  pin                     String?	    @db.VarChar(50)
  gst                    String?	    @db.VarChar(50)
  phone                   String?	    @db.VarChar(50)
  mobile                  String?	    @db.VarChar(50)
  mobile2                 String?	    @db.VarChar(50)
  whatsapp                String?	    @db.VarChar(50)
  email                   String?	    @db.VarChar(50)
  createdon               String?     @db.VarChar(50)
  isactive                String?	    @db.VarChar(1)
  panno                   String?	    @db.VarChar(50)
  credit_amt              Decimal?	  @db.Decimal(12,2)
  balance_amt             Decimal?	  @db.Decimal(12,2)
  last_paid_date          DateTime?   @db.Timestamp(6)
  state                   state?      @relation(fields: [state_id], references: [id])
}


model customer_shipping_address {
  id                      BigInt      @id @default(autoincrement())
  customer_id             BigInt
  state_id                BigInt
  address1                String?	    @db.VarChar(150)
  address2                String?	    @db.VarChar(150)
  address3                String?	    @db.VarChar(150)
  district                String?	    @db.VarChar(100)
  pin                     String?	    @db.VarChar(50)
  def_address             String?	    @db.VarChar(1)
  is_active               String?	    @db.VarChar(1)
  state                   state?      @relation(fields: [state_id], references: [id])
}


model stock {
  id                      BigInt      @id @default(autoincrement())
  center_id	              BigInt?
  product_id              BigInt
  mrp	                    Decimal    @default(0.00)
  available_stock         Int?
  open_stock              Int?
  is_active               String      @db.VarChar(1) @default("Y")

  createdAt	              DateTime?   @default(now())
  updatedAt	              DateTime?   @updatedAt
  created_by	            BigInt?
  updated_by              BigInt?
  product                 product?   @relation(fields: [product_id], references: [id])
}

model audit {
  id                      BigInt      @id @default(autoincrement())
  center_id	              BigInt?
  revision                BigInt?
  module                  String?
  module_ref_id           BigInt?
  module_ref_det_id       BigInt?
  action                  String?
  old_value               String?
  new_value               String?
  audit_date              DateTime    @default(now())
  createdAt	              DateTime?   @default(now())
  updatedAt	              DateTime?   @updatedAt
  created_by	            BigInt?
  updated_by              BigInt?
} 